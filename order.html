<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оформление тура</title>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="shortcut icon" href="img/favicon.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark-custom">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="img/logo.png" alt="Let's travell" height="30">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <div class="main-nav-items">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Главная</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="tours.html">Туры</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="order.html">Заказ</a>
                        </li>
                    </div>
                    <li class="nav-item contact-btn-container">
                        <a class="nav-link contact-btn" href="#footer" id="contactsNavLink">
                            <span class="contact-text">Наши контакты</span>
                            <i class="fas fa-phone-alt fa-flip-horizontal contact-icon"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="order-hero">
        <div class="container text-center">
            <h1 class="display-3 fw-bold mb-4">Оформление вашего путешествия</h1>
            <p class="lead">Всего несколько шагов отделяют вас от незабываемого приключения</p>
        </div>
    </section>

    <div class="container mb-5">
        <div class="step-indicator">
            <div class="step active" id="step1">
                <div class="step-number">1</div>
                <div class="step-label">Данные тура</div>
            </div>
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <div class="step-label">Личные данные</div>
            </div>
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <div class="step-label">Оплата</div>
            </div>
            <div class="step" id="step4">
                <div class="step-number">4</div>
                <div class="step-label">Подтверждение</div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8">
                <div class="form-section mb-4" id="tourInfoSection">
                    <h3 class="mb-4"><i class="fas fa-map-marked-alt me-2"></i>Информация о туре</h3>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card tour-card mb-3">
                                <img src="img/tour1.jpg" class="card-img-top tour-img" alt="Камчатка" id="selectedTourImage">
                                <div class="card-body">
                                    <h5 class="card-title" id="selectedTourTitle">Камчатка - край вулканов</h5>
                                    <p class="card-text" id="selectedTourDescription">Тур с посещением вулканов и Долины гейзеров. Включены трансферы и проживание.</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="price-tag" id="selectedTourPrice">от 24 900 ₽</span>
                                        <small class="text-muted"><i class="fas fa-calendar-alt"></i> <span id="selectedTourDefaultDate">10.07-20.07.2026</span></small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <form id="tourOptionsForm" class="needs-validation" novalidate>
                                <div class="mb-3">
                                    <label for="tourSelect" class="form-label">Выберите тур</label>
                                    <select class="form-select" id="tourSelect" required onchange="updateSelectedTour()">
                                        <option value="" selected disabled>Выберите тур</option>
                                        <option value="kamchatka" data-img="tour1.jpg" data-title="Камчатка - край вулканов" data-desc="Тур с посещением вулканов и Долины гейзеров. Включены трансферы и проживание." data-price="24900" data-dates="10.07-20.07.2026,15.08-25.08.2026,01.09-10.09.2026">Камчатка - край вулканов</option>
                                        <option value="altai" data-img="tour2.jpg" data-title="Алтай - горный край" data-desc="Экскурсии к Телецкому озеру и сплав по Катуни. Питание включено." data-price="15500" data-dates="15.08-25.08.2026,05.09-15.09.2026">Алтай - горный край</option>
                                        <option value="baikal" data-img="tour3.jpg" data-title="Байкал - жемчужина Сибири" data-desc="Тур с круизом по озеру и экскурсией на КБЖД. Проживание включено." data-price="18900" data-dates="01.09-10.09.2026,15.09-25.09.2026">Байкал - жемчужина Сибири</option>
                                        <option value="karelia" data-img="tour4.jpg" data-title="Карелия - страна озер" data-desc="Посещение острова Кижи и водопада Кивач. Включен рафтинг." data-price="16900" data-dates="05.07-15.07.2026,20.07-30.07.2026">Карелия - страна озер</option>
                                        <option value="blacksea" data-img="tour5.jpg" data-title="Отдых на Черном море" data-desc="Пляжный отдых с экскурсиями в горы. Проживание в отелях." data-price="14500" data-dates="10.06-20.06.2026,01.07-11.07.2026">Отдых на Черном море</option>
                                        <option value="goldenring" data-img="tour6.jpg" data-title="Золотое кольцо России" data-desc="Автобусный тур по древним городам. Входные билеты включены." data-price="12900" data-dates="15.05-22.05.2026,01.06-08.06.2026">Золотое кольцо России</option>
                                    </select>
                                    <div class="invalid-feedback">Пожалуйста, выберите тур</div>
                                </div>
                                <div class="mb-3">
                                    <label for="tourDate" class="form-label">Дата тура</label>
                                    <select class="form-select" id="tourDate" required>
                                        <option value="" selected disabled>Выберите дату</option>
                                        <option value="10.07-20.07.2026">10.07-20.07.2026</option>
                                        <option value="15.08-25.08.2026">15.08-25.08.2026</option>
                                        <option value="01.09-10.09.2026">01.09-10.09.2026</option>
                                    </select>
                                    <div class="invalid-feedback">Пожалуйста, выберите дату</div>
                                </div>
                                <div class="mb-3">
                                    <label for="participants" class="form-label">Количество участников</label>
                                    <input type="number" class="form-control" id="participants" min="1" max="10" value="1" required>
                                    <div class="invalid-feedback">Пожалуйста, укажите количество участников (от 1 до 10)</div>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="insurance">
                                    <label class="form-check-label" for="insurance">
                                        Страховка (+1 200 ₽ с человека)
                                    </label>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-dark-custom w-100 w-md-auto" onclick="validateTourInfo()">Далее</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="form-section mb-4 d-none" id="personalInfoSection">
                    <h3 class="mb-4"><i class="fas fa-user-circle me-2"></i>Личные данные</h3>
                    <form id="personalInfoForm" class="needs-validation" novalidate>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <input type="text" class="form-control" id="firstName" placeholder="Имя" required>
                                <div class="invalid-feedback">Пожалуйста, введите корректное имя (только буквы, пробелы и дефисы)</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <input type="text" class="form-control" id="lastName" placeholder="Фамилия" required>
                                <div class="invalid-feedback">Пожалуйста, введите корректную фамилию (только буквы, пробелы и дефисы)</div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" id="email" placeholder="Email" required>
                            <div class="invalid-feedback">Пожалуйста, укажите корректный email</div>
                        </div>
                        <div class="mb-3">
                            <input type="tel" class="form-control" id="phone" placeholder="Телефон" required pattern="\+7\s?[\(]{0,1}[0-9]{3}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}">
                            <div class="invalid-feedback">Пожалуйста, укажите телефон в формате +7 (XXX) XXX-XX-XX</div>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="passport" placeholder="Паспортные данные (серия и номер)" required pattern="\d{4}\s?\d{6}">
                            <div class="invalid-feedback">Пожалуйста, укажите паспортные данные в формате 1234 567890</div>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="address" placeholder="Адрес">
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" id="comments" rows="3" placeholder="Комментарии к заказу"></textarea>
                        </div>
                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-outline-secondary" onclick="prevStep(1)">Назад</button>
                            <button type="button" class="btn btn-dark-custom" onclick="validatePersonalInfo()">Далее</button>
                        </div>
                    </form>
                </div>

                <div class="form-section mb-4 d-none" id="paymentSection">
                    <h3 class="mb-4"><i class="fas fa-credit-card me-2"></i>Способ оплаты</h3>
                    
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <div class="payment-method active" data-method="card" onclick="selectPaymentMethod(this)">
                                <div class="text-center">
                                    <i class="fas fa-credit-card payment-icon"></i>
                                    <h5>Банковская карта</h5>
                                    <p class="small text-muted">Оплата онлайн банковской картой</p>
                                    <div class="payment-badges mt-2"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <div class="payment-method" data-method="transfer" onclick="selectPaymentMethod(this)">
                                <div class="text-center">
                                    <i class="fas fa-university payment-icon"></i>
                                    <h5>Банковский перевод</h5>
                                    <p class="small text-muted">Оплата по реквизитам</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <div class="payment-method" data-method="cash" onclick="selectPaymentMethod(this)">
                                <div class="text-center">
                                    <i class="fas fa-money-bill-wave payment-icon"></i>
                                    <h5>Наличные</h5>
                                    <p class="small text-muted">Оплата в офисе</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <div class="payment-method" data-method="installment" onclick="selectPaymentMethod(this)">
                                <div class="text-center">
                                    <i class="fas fa-calendar-check payment-icon"></i>
                                    <h5>Рассрочка</h5>
                                    <p class="small text-muted">Оплата частями</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="cardPaymentDetails" class="border p-4 rounded mb-4">
                        <h5 class="mb-3"><i class="fas fa-credit-card me-2"></i>Данные карты</h5>
                        
                        <div class="mb-3">
                            <label for="cardNumber" class="form-label">Номер карты</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456" 
                                    pattern="\d{4}\s?\d{4}\s?\d{4}\s?\d{4}" required>
                                <div class="invalid-feedback">Пожалуйста, введите корректный номер карты (16 цифр)</div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="cardExpiry" class="form-label">Срок действия</label>
                                <input type="text" class="form-control" id="cardExpiry" placeholder="MM/ГГ" 
                                    pattern="(0[1-9]|1[0-2])\/?([0-9]{2})" required>
                                <div class="invalid-feedback">Пожалуйста, введите срок действия в формате MM/ГГ</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="cardCvv" class="form-label">CVV/CVC</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="cardCvv" placeholder="123" 
                                        pattern="\d{3}" required maxlength="3">
                                    <div class="invalid-feedback">Пожалуйста, введите 3 цифры с обратной стороны карты</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="cardName" class="form-label">Имя владельца (как на карте)</label>
                            <input type="text" class="form-control" id="cardName" placeholder="IVAN IVANOV" required>
                            <div class="invalid-feedback">Пожалуйста, введите имя латинскими буквами (допустимы пробелы и дефисы)</div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">
                        <button type="button" class="btn btn-outline-secondary" onclick="prevStep(2)">Назад</button>
                        <button type="button" class="btn btn-dark-custom" id="proceedToConfirmationBtn" 
                                onclick="validatePaymentInfo()">
                            Перейти к подтверждению
                        </button>
                    </div>
                </div>

                <div class="form-section d-none" id="confirmationSection">
                    <h3 class="mb-4"><i class="fas fa-check-circle me-2 text-success"></i>Подтверждение заказа</h3>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card tour-card-confirm">
                                <div class="tour-image-container">
                                    <img src="img/tour1.jpg" class="tour-image-confirm" alt="Камчатка" id="confirmTourImage">
                                </div>
                                <div class="tour-details">
                                    <h5 class="tour-title-confirm" id="confirmTourTitle">Камчатка - край вулканов</h5>
                                    <div class="tour-meta">
                                        <div class="tour-meta-item">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span id="confirmTourDate">10.07-20.07.2026</span>
                                        </div>
                                        <div class="tour-meta-item">
                                            <i class="fas fa-users"></i>
                                            <span id="confirmParticipants">1 участник</span>
                                        </div>
                                        <div class="tour-meta-item">
                                            <i class="fas fa-shield-alt"></i>
                                            <span id="confirmInsurance">Страховка включена</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="card border-primary h-100">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0"><i class="fas fa-user-circle me-2"></i>Контактная информация</h5>
                                </div>
                                <div class="card-body p-0">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="fas fa-user me-2 text-muted"></i>Имя:</span>
                                            <span class="fw-bold text-end" id="confirmFirstName">Иван</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="fas fa-user me-2 text-muted"></i>Фамилия:</span>
                                            <span class="fw-bold text-end" id="confirmLastName">Иванов</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="fas fa-envelope me-2 text-muted"></i>Email:</span>
                                            <span class="fw-bold text-end" id="confirmEmail">ivan@example.com</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="fas fa-phone me-2 text-muted"></i>Телефон:</span>
                                            <span class="fw-bold text-end" id="confirmPhone">+7 (900) 123-45-67</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="fas fa-passport me-2 text-muted"></i>Паспорт:</span>
                                            <span class="fw-bold text-end" id="confirmPassport">1234 567890</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card border-info mb-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="fas fa-credit-card me-2"></i>Способ оплаты</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1" id="confirmPaymentMethod">Банковская карта</h6>
                                    <div id="confirmCardDetails" class="d-none text-muted small">
                                        <div class="mb-1">Карта: **** **** **** 3456</div>
                                        <div>Срок: 12/25</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="ageConfirmation" required>
                                <label class="form-check-label" for="ageConfirmation">
                                    Я подтверждаю, что мне исполнилось 18 лет
                                </label>
                                <div class="invalid-feedback">Необходимо ваше подтверждение возраста</div>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="termsConfirmation" required>
                                <label class="form-check-label" for="termsConfirmation">
                                    Я подтверждаю, что ознакомлен и согласен с 
                                    <a href="privacy&terms.html" target="_blank">условиями бронирования</a> и 
                                    <a href="privacy&terms.html" target="_blank">политикой конфиденциальности</a>
                                </label>
                                <div class="invalid-feedback">Необходимо ваше согласие с условиями</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <button type="button" class="btn btn-outline-secondary" onclick="prevStep(3)">
                            Назад
                        </button>
                        <button type="button" class="btn btn-success btn-lg" onclick="confirmOrder()">
                            <i class="fas fa-check-circle me-2"></i>Подтвердить заказ
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card summary-card p-4 mb-4">
                    <h4 class="mb-4"><i class="fas fa-receipt me-2"></i>Ваш заказ</h4>
                    
                    <div class="summary-item">
                        <span id="summaryTourTitle">Тур "Камчатка"</span>
                        <span id="summaryTourPrice">24 900 ₽</span>
                    </div>
                    <div class="summary-item">
                        <span id="summaryParticipants">1 участник</span>
                        <span id="summaryParticipantsPrice">+0 ₽</span>
                    </div>
                    <div class="summary-item">
                        <span id="summaryInsurance">Страховка</span>
                        <span id="summaryInsurancePrice">+1 200 ₽</span>
                    </div>
                    
                    <div class="summary-item summary-total mt-3">
                        <span>Итого:</span>
                        <span id="summaryTotalPrice">26 100 ₽</span>
                    </div>
                    
                    <div class="mt-4">
                        <div class="alert alert-info small">
                            <i class="fas fa-info-circle me-2"></i>Цена изменяется от количества выбранных участников.
                        </div>
                    </div>
                </div>
                
                <div class="card p-4">
                    <h5 class="mb-3"><i class="fas fa-headset me-2"></i>Нужна помощь?</h5>
                    <p class="small">Наши менеджеры с радостью ответят на все ваши вопросы и помогут с оформлением.</p>
                </div>
            </div>
        </div>
    </div>

    <footer id="footer">
        <div class="container">
            <div class="row footer-cols">
                <div class="col-lg col-md-4 mb-4 footer-col-1">
                    <img src="img/logo.png" alt="Let's travell" height="35" class="mb-3">
                    <p class="small footer-about-text">Путешествуем с 2025 года.<br>Более 500 довольных клиентов.</p>
                    <h6 class="h6 mb-3">Ищите нас на этих платформах</h6>
                    <div class="social-icons">
                        <a href="https://vk.com/id436072015" alt="VK" class="text-white me-2"><i class="fab fa-vk"></i></a>
                    </div>
                </div>

                <div class="col-lg col-md-4 mb-4 footer-col-2">
                    <h5 class="h6 mb-3">Основное</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html#about" class="text-white small">О нашей компании</a></li>
                        <li class="mb-2"><a href="tours.html" class="text-white small">Туры по России</a></li>
                    </ul>
                </div>

                <div class="col-lg col-md-6 mb-4 footer-col-4">
                    <h5 class="h6 mb-3">Контакты</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2 small contact-item" data-clipboard-text="+79005027437">
                            <i class="fas fa-phone me-2"></i> +7 (900) 502-74-37
                            <span class="copy-tooltip">Скопировано!</span>
                        </li>
                        <li class="mb-2 small contact-item" data-clipboard-text="p4savehenko@yandex.ru">
                            <i class="fas fa-envelope me-2"></i> p4savchenko@yandex.ru
                            <span class="copy-tooltip">Скопировано!</span>
                        </li>
                        <li class="mb-2 small">
                            <a href="https://yandex.ru/maps/-/CDqRrJQh" target="_blank" class="text-white location-link">
                                <i class="fas fa-map-marker-alt me-2"></i>г. Санкт-Петербург, Невский проспект, д. 55
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="col-lg col-md-6 mb-4 footer-col-5">
                    <p class="text-white-50 small">Получайте предложения на почту</p>
                    <form id="subscribeForm" class="mb-2">
                        <div class="input-group input-group-sm">
                            <input type="email" class="form-control form-control-sm" placeholder="Ваш email">
                            <button class="btn btn-dark-custom" type="submit">
                                <i class="fas fa-paper-plane" style="height: 18px; margin-top: 3px;"></i>
                            </button>
                        </div>
                    </form>
                    <small class="text-white-50">Подписываясь, вы соглашаетесь с 
                        <a href="privacy&terms.html" class="text-white">политикой конфиденциальности</a>
                    </small>
                </div>
            </div>

            <hr class="bg-light my-2">

            <div class="row">
                <div class="col-md-6 mb-2">
                    <p class="mb-0 small">&copy; 2025 Let's travell. Все права защищены.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="privacy&terms.html#privacy" class="text-white me-3 small">Политика конфиденциальности</a>
                    <a href="privacy&terms.html#terms" class="text-white small">Условия использования</a>
                </div>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="mb-4">
                        <i class="fas fa-check-circle text-success" style="font-size: 5rem;"></i>
                    </div>
                    <h3 class="mb-3">Заказ оформлен!</h3>
                    <p class="mb-4">Ваш тур успешно забронирован. Подробная информация отправлена на ваш email.</p>
                    <div class="d-grid gap-2">
                        <button type="button" class="btn btn-dark-custom" data-bs-dismiss="modal">Отлично!</button>
                        <a href="tours.html" class="btn btn-outline-dark">Посмотреть другие туры</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>
</body>
</html>